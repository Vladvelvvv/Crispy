{% extends "main/base.html" %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static "1. catalog\source\styles\catalog.css" %}">
    <link rel="stylesheet" href="{% static "source\styles\bg-images\catalog-bg-image\catalog-bg-image.css" %}">
{% endblock %}

{% block content %}    
</body>
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-lg-2">
            </div>
            <div class="col-lg-8 col-md-12">
                <div class="row">
                    {% for product in products %}
                        <div class="col-lg-3 col-md-6 mt-4">
                            <div class="card">
                                <a  href="{% url "goods:product" product.slug %}">
                                    {% if product.image %}
                                        <img src="{{ product.image.url }}" class="card-img-top"
                                        alt="{{product.name}}">
                                    {% else %}
                                        <img src="{% static "source\images\Not found image.png" %}" class="card-img-top" alt="Изображение товара отсутствует">
                                    {% endif %}
                                </a>
                                <a  href="{% url "goods:product" product.slug %}">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ product.name }}</h5>
                                        <p class="card-id">id: {{product.display_id}}</p>
                                        <p class="card-text">
                                            {{product.description|truncatechars:45}}
                                        </p>
                                        {% if product.discount %}
                                            <p><strong>Цена со скидкой: {{ product.sell_price }} рублей</strong></p>
                                        {% else %}
                                            <p>Цена: {{product.price}} рублей</p>
                                        {% endif %}
                                        <a href="#" class="btn btn-primary">Добавить в корзину</a>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endfor %}

                    <div class="col-lg-12 col-md-12 text-center mt-4">
                        <p>Есть вопросы? Напишите нам в директ!</p>
                    </div>
                    <div class="col-lg-12 col-md-12 text-center">
                        <p><a href="https://www.instagram.com/direct/t/102299521419536" target="_blank"><img
                                    class="call-anim" style="width: 40px" src="{% static "source\files\direct.jpg" %}"
                                    alt="Наш директ"></a></p>
                    </div>

                    <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-center my-4">
                            <div class="custom-shadow d-flex">
                                <li class="page-item {% if not products.has_previous %}disabled{% endif %}">
                                    <a class="page-link" href="
                                    {% if products.has_previous %}
                                    {% url "goods:catalog" slug_url products.previous_page_number %}
                                    {% else %}
                                    #
                                    {% endif %}">Назад
                                    </a>
                                </li>
                                
                                {% for page in products.paginator.page_range %}
                                    {% if  page >= products.number|add:-2 and page <= products.number|add:2 %}
                                        <li class="page-item {% if products.number == page %} active {% endif %}">
                                            <a class="page-link" href="{% url "goods:catalog" slug_url page %}">{{ page }}</a>
                                        </li>
                                    {% endif %}
                                {% endfor %}
                                

                                <li class="page-item {% if not products.has_next %}disabled{% endif %}">
                                    <a class="page-link" href="
                                    {% if products.has_next %}
                                    {% url "goods:catalog" slug_url products.next_page_number %}
                                    {% else %}
                                    #
                                    {% endif %}">Следующая</a>
                                </li>
                            </div>
                        </ul>
                    </nav>

                </div>
            </div>
            <div class="col-lg-2 col-md-12">
                <div class="row px-2">
                    <div class="col-lg-12 sidebar my-4">

                    </div>
                    <div class="col-lg-12 sidebar my-4">

                    </div>
                    <div class="col-lg-12 sidebar my-4">

                    </div>
                    <div class="col-lg-12 sidebar my-4">

                    </div>
                </div>
            </div>

        </div>
    </div>
{% endblock %}